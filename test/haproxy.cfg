#
# Layer 4: set haproxy to TCP mode.
# Establishes full-duplex connection. Requests are not inspected (no layer 7).
#

# Regular proxy
frontend listener
    mode tcp
    bind *:8000
    default_backend loadbalancer
backend loadbalancer
    mode tcp
    server srv1 127.0.0.1:2222

# Proxy protocol enabled
frontend proxylistener
    mode tcp
    bind *:8001
    default_backend proxyloadbalancer
backend proxyloadbalancer
    mode tcp
    server srv1 127.0.0.1:2222 send-proxy
